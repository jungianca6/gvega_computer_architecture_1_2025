from dis import Instruction

from CPU.Cpu import Cpu

if __name__ == "__main__":
    cpu = Cpu()

    # Aqu√≠ puedes cargar instrucciones o realizar otras configuraciones necesarias
    instruction = ['01000000000100000000000000000000',
                   '01000000100100000000000000000100',
                   '00100111010000110000000000100000',
                   '00100001101000000000000000100000',
                   '01111000000000000000000000010001',
                   '10100110000010000000000000000100',
                   '00100010011100000011000000000000',
                   '10111000000011000000000000000101',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00101010100101100111100000000000',
                   '00100100000100011001000000000000',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '10100110000100000000000000000100',
                   '00100010011100010011000000000000',
                   '10111000000101000000000000000101',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00101010100101100111100000000000',
                   '00100100000000001001000000000000',
                   '00100100010001000011000000000000',
                   '00000000000000000000000000000000',
                   '00100011100110010000000000000001',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00000000000000000000000000000000',
                   '00110001100100000000000000100000',
                   '01100000000000000000000000101101',
                   '01111000000000000000000000010001',
                   '01010000000100000000000000000000',
                   '01010000100100000000000000000100',
                   '00010000000000000000000000000000']

    cpu.setInstructions(instruction)

    while True:
        pipe_stages, pipe_cycle, registers, memory = cpu.runCPU()
        print(f"Pipeline Stages: {pipe_stages}")
        print(f"Pipeline Cycle: {pipe_cycle}")
        print(f"Registers: {registers}")
        print(f"Memory: {memory}")
        cpu.pipeline.vault.debug_print()
        if all(stage is None for stage in pipe_stages.values()):
            print("No more instructions to execute.")
            break

    print("CPU execution completed.")